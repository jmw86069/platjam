<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Assign color function to a numeric vector — assign_numeric_colors • platjam</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Assign color function to a numeric vector — assign_numeric_colors"><meta property="og:description" content="Assign color function to a numeric vector"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">platjam</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.0.73.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="http://github.com/jmw86069/platjam/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Assign color function to a numeric vector</h1>
    <small class="dont-index">Source: <a href="http://github.com/jmw86069/platjam/blob/HEAD/R/jam-numeric-to-colorfn.R" class="external-link"><code>R/jam-numeric-to-colorfn.R</code></a></small>
    <div class="hidden name"><code>assign_numeric_colors.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Assign color function to a numeric vector</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">assign_numeric_colors</span><span class="op">(</span></span>
<span>  <span class="va">x</span>,</span>
<span>  <span class="va">color</span>,</span>
<span>  color_max <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ratio_for_zero_baseline <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  lower_range_expansion <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  base_color <span class="op">=</span> <span class="st">"#fff6f4"</span>,</span>
<span>  restrict_pretty_range <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  lens <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  verbose <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>x</dt>
<dd><p><code>numeric</code> or <code>integer</code> vector</p></dd>


<dt>color</dt>
<dd><p><code>character</code> color</p></dd>


<dt>color_max</dt>
<dd><p><code>numeric</code> optional fixed value to define the
<code>numeric</code> value associated with the maximum color gradient color.</p></dd>


<dt>ratio_for_zero_baseline</dt>
<dd><p><code>numeric</code> indicating the ratio of
max to min numeric range, above which the baseline value
should include zero. This argument is intended when values
include <code>c(3, 100)</code> and the numeric range is more reasonable
to include zero; compared to values between <code>c(185, 192)</code> where
it makes more sense to apply the color gradient only near
those values, and not to use <code>c(0, 192)</code>.</p></dd>


<dt>lower_range_expansion</dt>
<dd><p><code>numeric</code> used when the baseline is not
zero, see <code>ratio_for_zero_baseline</code>, to adjust the baseline below
the lowest value by this fraction of the span of values (max - min)
below the lowest value. The intention is to prevent assigning
white <code>base_color</code> to this lowest value, instead it should use
a very pale variant of <code>color</code>.</p></dd>


<dt>base_color</dt>
<dd><p><code>character</code> string used as the baseline color when
defining a color gradient to <code>color</code>. This value is passed to
<code>jamba::getColorRamp(..., defaultBaseColor)</code>.</p></dd>


<dt>restrict_pretty_range</dt>
<dd><p><code>logical</code> indicating whether the values
returned by <code><a href="https://rdrr.io/r/base/pretty.html" class="external-link">pretty()</a></code> should be filtered by <code>range(x)</code>, excluding
any numeric breaks outside that range. The practical effect is that
it reduces labels displayed by <code><a href="https://rdrr.io/pkg/jamba/man/showColors.html" class="external-link">jamba::showColors()</a></code> or by color
legends drawn by <code><a href="https://rdrr.io/pkg/ComplexHeatmap/man/Heatmap.html" class="external-link">ComplexHeatmap::Heatmap()</a></code>.</p></dd>


<dt>lens</dt>
<dd><p><code>numeric</code> value that defines the intensity of color gradient,
with higher values increasing the rate of increase in color intensity,
and negative values decreasing this rate. This argument is passed
to <code><a href="https://rdrr.io/pkg/jamba/man/getColorRamp.html" class="external-link">jamba::getColorRamp()</a></code>.</p></dd>


<dt>...</dt>
<dd><p>additional arguments are ignored.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p><code>function</code> as defined by <code><a href="https://rdrr.io/pkg/circlize/man/colorRamp2.html" class="external-link">circlize::colorRamp2()</a></code> which takes
a <code>numeric</code> vector as input, and returns <code>character</code> vector of
colors as output. The attributes described below are used to
show a suitable summary of colors in <code><a href="https://rdrr.io/pkg/jamba/man/showColors.html" class="external-link">jamba::showColors()</a></code>;
and are used by <code><a href="https://rdrr.io/pkg/jamses/man/heatmap_se.html" class="external-link">jamses::heatmap_se()</a></code> to define a
usable color legend with reasonable number of labels.
The <code>function</code> also contains two important attributes:</p><ul><li><p><code>"breaks"</code>: <code>numeric</code> values at break positions used when the
color function was defined. Note the values are taken from the
color function environment, so modifying breaks directly will
not affect the color function output.</p></li>
<li><p><code>"colors"</code>: a matrix of colors in rgb format, with columns
red, blue, green, and <code>numeric</code> values ranging from 0 to 1.
The number of rows equals the length of color breaks.</p></li>
</ul></div>
    <div id="details">
    <h2>Details</h2>
    <p>This function is called internally by <code><a href="design2colors.html">design2colors()</a></code>. It takes
a <code>numeric</code> vector as input, and applies a color gradient
defined by <code>color</code> across the range of <code>numeric</code> values.</p>
<p>When there are negative values, a divergent color scale is generated:</p><ul><li><p>When <code>color</code> is a single R color, it is used as the positive color
gradient. A complementary color is chosen as the negative color
using <code><a href="quick_complement_color.html">quick_complement_color()</a></code>. The middle color is <code>base_color</code>.</p></li>
<li><p>When <code>color</code> is a named color gradient, it is assumed to be a
divergent gradient. The middle color of the gradient is assigned to zero,
and the color gradient is symmetric above and below zero.</p></li>
</ul><p>The <code>numeric</code> range is either defined by the data <code>x</code>, or when
<code>color_max</code> is supplied, it is used to define the <code>numeric</code>
value at which (or higher) the maximum color is assigned.</p><ul><li><p>When <code>color_max</code> is not assigned, it is defined as <code>max(abs(x))</code>.</p></li>
<li><p>If there are negative values, the color gradient will be
defined from <code>-color_max</code> to <code>color_max</code>, with the middle color
assigned to zero, as described above.</p></li>
<li><p>If there are only positive values, the baseline will be defined
using <code>ratio_for_zero_baseline</code>, and the maximum color will be defined
at <code>color_max</code> (and higher).</p></li>
</ul><p>The <code>ratio_for_zero_baseline</code> is used only when there are
no negative values, since it determines whether the color gradient
should be applied starting at zero, or based upon <code>min(x)</code>.
When the lowest value is less than <code>ratio_for_zero_baseline * color_max</code>
the color gradient is applied starting from zero;
otherwise the baseline uses <code>min(x)</code>. In the latter case, non-zero
baseline, the lowest value is extended by multiplying
<code>lower_range_expansion</code> by the span of the numeric range, in order
to prevent the lowest non-zero value from being a blank color
defined by <code>base_color</code>.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>Other jam color functions: 
<code><a href="design2colors.html">design2colors</a>()</code>,
<code><a href="df_to_numcolors.html">df_to_numcolors</a>()</code>,
<code><a href="mean_hue.html">mean_hue</a>()</code>,
<code><a href="print_color_list.html">print_color_list</a>()</code>,
<code><a href="quick_complement_color.html">quick_complement_color</a>()</code></p></div>
    </div>

  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by James M. Ward.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

